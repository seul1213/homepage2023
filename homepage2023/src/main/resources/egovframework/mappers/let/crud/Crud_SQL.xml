<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="egovframework.let.crud.service.impl.CrudMapper">

	<resultMap id="crud"
		type="egovframework.let.crud.service.CrudVO">
		<result property="crudId" column="CRUD_ID" />
		<result property="crudSj" column="CRUD_SJ" />
		<result property="crudCn" column="CRUD_CN" />
		<result property="userNm" column="USER_NM" />
		<result property="frstRegistPnttm" column="FRST_REGIST_PNTTM" />
	</resultMap>

	<select id="selectCrud" resultMap="crud">
		select
		CRUD_ID
		,CRUD_SJ
		,CRUD_CN
		,USER_NM
		,FRST_REGIST_PNTTM
		from LETCRUD
		where CRUD_ID =#{crudId}
	</select>

	<select id="selectCrudList" resultType="egovMap">
		select
		CRUD_ID
		,CRUD_SJ
		,USER_NM
		,date_format(FRST_REGIST_PNTTM, '%Y-%m-%d') as FRST_REGIST_PNTTM
		from LETCRUD
		order by CRUD_ID desc
		limit #{recordCountPerPage} OFFSET #{firstIndex}
	</select>

	<select id="selectCrudListCnt" resultType="java.lang.Integer">
		select
		count(*) CNT
		from letcrud
	</select>

	<insert id="insertCrud"
		parameterType="egovframework.let.crud.service.CrudVO">
		insert into LETCRUD(
		CRUD_ID
		,CRUD_SJ
		,CRUD_CN
		,USER_NM
		,FRST_REGIST_PNTTM
		) values(
		#{crudId}
		,#{crudSj}
		,#{crudCn}
		,#{userNm}
		,NOW()
		)
	</insert>

	<update id="updateCrud"
		parameterType="egovframework.let.crud.service.CrudVO">
		update letcrud set
		CRUD_SJ =#{crudSj}
		,CRUD_CN =#{crudCn}
		,USER_NM =#{userNm}
		where CRUD_ID =#{crudId}
	</update>

	<delete id="deleteCrud"
		parameterType="egovframework.let.crud.service.CrudVO">
		delete from letcrud
		where CRUD_ID =#{crudId}
	</delete>



</mapper>
